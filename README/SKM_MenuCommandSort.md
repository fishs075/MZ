![Plugin Version](https://img.shields.io/badge/version-1.1.0-blue)
![RPG Maker MZ](https://img.shields.io/badge/RPG%20Maker-MZ-green)
![License](https://img.shields.io/badge/license-MIT-brightgreen)

# SKM_MenuCommandSort

RPGツクールMZ用 メニューコマンド並べ替え＆スイッチ制御プラグイン

■ [DLリンク](https://raw.githubusercontent.com/fishs075/MZ/refs/heads/main/SKM_MenuCommandSort.js)

## 概要
SKM_MenuCommandSortは、メニュー画面のコマンド（「アイテム」「スキル」「装備」など）の並び順を自由に変更できるプラグインです。
また、ゲームスイッチのON/OFFに応じてコマンドを「無効化（グレーアウト）」したり「非表示」にしたりする機能も備えています。

## 特徴
1. **コマンド並び替え（メイン機能）**
   - プラグインパラメータで指定した順序通りにメニューコマンドを表示します。
   - リストに登録されていないコマンドは**自動的に非表示**になります。
   - 不要なコマンドを隠したい場合も、リストから外すだけで簡単に設定できます。

2. **スイッチによる制御**
   - 特定のスイッチがON/OFFのときにコマンドを「無効化」や「非表示」にできます。
   - ストーリー進行に合わせて「スキル」を解禁したり、特定の場面で「セーブ」を禁止したりするのに便利です。
   - 無効化時にコマンド名を「＊＊＊＊＊」のように伏字にすることも可能です。

3. **コモンイベントの追加**
   - 任意のコモンイベントをメニューコマンドとして追加・実行できます。
   - 変数を指定することで、アクターを選択してからそのIDを変数に格納し、コモンイベントを実行する処理も可能です。

## 導入方法
1. プラグインファイル `SKM_MenuCommandSort.js` をプロジェクトの `js/plugins` フォルダに入れます。
2. プラグイン管理画面で `SKM_MenuCommandSort` を有効にします。

## 使い方

### 1. 並び替え設定（必須）
プラグインパラメータ「**コマンド並び替え (CommandOrders)**」を開き、表示したいコマンドを上から順に登録してください。
*ここに含まれないコマンドはメニューに表示されなくなります。*

**設定項目:**
- **コマンド名**: 表示名で指定する場合（例: `アイテム`）
- **コマンドシンボル**: 内部IDで指定する場合（例: `item`）
  - 主なシンボル: `item`, `skill`, `equip`, `status`, `formation`, `options`, `save`, `gameEnd`
  - *両方指定した場合はシンボルの一致が優先され、コマンド名は表示用として上書き利用されます。*

### 2. コモンイベント追加（任意）
パラメータ「**コモンイベントコマンド (CommonEventCommands)**」で独自のコマンドを作成できます。
作成したコマンドを表示するには、必ず「**コマンド並び替え**」リストにも登録してください。

### 3. スイッチ制御（任意）
- **無効化設定 (CommandSwitches)**: 指定スイッチが条件を満たすとき、コマンドを選択不可（グレーアウト）にします。
  - *コマンド名とシンボルを両方指定すると、無効化されている間だけ表示名を変更できます（例：「？？？」など）。*
- **非表示設定 (HideSwitches)**: 指定スイッチが条件を満たすとき、コマンドをリストから消します。

## 注意事項
- 他のプラグインで追加されたメニューコマンドも、その「シンボル」や「表示名」が分かれば並び替え・制御が可能です。
- コモンイベントはメニュー画面を閉じずに実行されます。場所移動などのマップシーン切り替えを伴う処理は正しく動作しない場合があります。

## 作者
sakananomaeasi (with AI support)

## ライセンス
MIT License
